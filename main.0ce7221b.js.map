{"version":3,"sources":["scripts/main.js"],"names":["messageLose","document","querySelector","messageWin","messageStart","button","gameScore","fieldRows","querySelectorAll","score","field","fieldOfZeros","fillRandomCell","row","Math","floor","random","cell","fillGameField","children","innerText","className","removeEventListener","listenerForArrows","classList","remove","checkGameOver","mergeCellsOfRow","i","length","push","clickArrowLeft","filledCells","filter","value","clickArrowRight","reverse","transpose","arr","map","column","clickArrowUp","clickArrowDown","gameOver","transposedField","fieldContainsZero","some","item","includes","e","key","addEventListener","add","replace","hidden"],"mappings":"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","file":"main.0ce7221b.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\nconst messageStart = document.querySelector('.message-start');\n\nconst button = document.querySelector('.button');\nconst gameScore = document.querySelector('.game-score');\nconst fieldRows = document.querySelectorAll('.field-row');\nlet score = 0;\nlet field = fieldOfZeros();\n\nfunction fieldOfZeros() {\n  return [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n}\n\nfunction fillRandomCell() {\n  const row = Math.floor(Math.random() * 4);\n  const cell = Math.floor(Math.random() * 4);\n\n  (field[row][cell] === 0)\n    ? field[row][cell] = (Math.floor(Math.random() * 100) > 10 ? 2 : 4)\n    : fillRandomCell();\n}\n\nfunction fillGameField() {\n  for (let row = 0; row < 4; row++) {\n    for (let cell = 0; cell < 4; cell++) {\n      fieldRows[row].children[cell].innerText = field[row][cell] || '';\n\n      fieldRows[row].children[cell].className\n      = `field-cell field-cell--${field[row][cell]}`;\n\n      if (field[row][cell] === 2048) {\n        document.removeEventListener('keydown', listenerForArrows);\n        messageWin.classList.remove('hidden');\n      };\n    }\n  }\n  gameScore.innerText = score;\n  checkGameOver();\n}\n\nfunction mergeCellsOfRow(row) {\n  for (let i = 0; i < row.length - 1; i++) {\n    if (row[i] === row[i + 1]) {\n      row[i] *= 2;\n      row[i + 1] = 0;\n      score += row[i];\n    }\n  }\n\n  while (row.length < 4) {\n    row.push(0);\n  }\n\n  return row;\n}\n\nfunction clickArrowLeft() {\n  for (let row = 0; row < 4; row++) {\n    const filledCells = field[row].filter(value => value !== 0);\n\n    mergeCellsOfRow(filledCells);\n    field[row] = filledCells;\n  }\n}\n\nfunction clickArrowRight() {\n  for (let row = 0; row < 4; row++) {\n    const filledCells = field[row].reverse().filter(value => value !== 0);\n\n    mergeCellsOfRow(filledCells);\n    field[row] = filledCells.reverse();\n  }\n}\n\nfunction transpose(arr) {\n  return arr.map((value, column) => arr.map(row => row[column]));\n}\n\nfunction clickArrowUp() {\n  field = transpose(field);\n  clickArrowLeft();\n  field = transpose(field);\n}\n\nfunction clickArrowDown() {\n  field = transpose(field);\n  clickArrowRight();\n  field = transpose(field);\n}\n\nfunction checkGameOver() {\n  let gameOver = true;\n  const transposedField = transpose([...field]);\n  const fieldContainsZero = field.some(item => item.includes(0));\n\n  for (let row = 0; row < 4; row++) {\n    for (let cell = 0; cell < 3; cell++) {\n      if (field[row][cell] === field[row][cell + 1]\n        || transposedField[row][cell] === transposedField[row][cell + 1]) {\n        gameOver = false;\n      }\n    }\n  }\n\n  if (gameOver && !fieldContainsZero) {\n    document.removeEventListener('keydown', listenerForArrows);\n    messageLose.classList.remove('hidden');\n  };\n}\n\nfunction listenerForArrows(e) {\n  switch (e.key) {\n    case 'ArrowLeft' :\n      clickArrowLeft();\n      fillRandomCell();\n      fillGameField();\n      break;\n\n    case 'ArrowRight' :\n      clickArrowRight();\n      fillRandomCell();\n      fillGameField();\n      break;\n\n    case 'ArrowUp' :\n      clickArrowUp();\n      fillRandomCell();\n      fillGameField();\n      break;\n\n    case 'ArrowDown' :\n      clickArrowDown();\n      fillRandomCell();\n      fillGameField();\n      break;\n  }\n}\n\nbutton.addEventListener('click', (e) => {\n  document.addEventListener('keydown', listenerForArrows);\n  messageWin.classList.add('hidden');\n  messageLose.classList.add('hidden');\n\n  if (button.innerText === 'Start') {\n    button.innerText = 'Restart';\n    button.classList.replace('start', 'restart');\n    messageStart.hidden = true;\n  } else {\n    field = fieldOfZeros();\n    score = 0;\n  }\n\n  fillRandomCell();\n  fillRandomCell();\n  fillGameField();\n});\n"]}